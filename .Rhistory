html_nodes('a') %>%
html_text()
title4
url_4_chosun <- 'http://biz.chosun.com/svc/list_in/list.html?source=1&pn=2'
url <- url_4_chosun
html <- read_html(url)
title4 <- html %>%
html_nodes('.list_item') %>%
html_nodes('dt') %>%
html_nodes('a') %>%
html_text()
title4
title_chosun<-c()
url_4_chosun_1 <- 'http://biz.chosun.com/svc/list_in/list.html?source=1&pn='
page <-c(1:18)
url <- paste0(url_4_chosun_1, x)
html <- read_html(url)
title_temp <- html %>%
html_nodes('.list_item') %>%
html_nodes('dt') %>%
html_nodes('a') %>%
html_text()
title_chosun <- c(url_4_chosun_1, title_temp)
url <- paste0(url_4_chosun_1, 1)
html <- read_html(url)
title_temp <- html %>%
html_nodes('.list_item') %>%
html_nodes('dt') %>%
html_nodes('a') %>%
html_text()
title_chosun <- c(url_4_chosun_1, title_temp)
title_chosun
url <- paste0(url_4_chosun_1, 2)
html <- read_html(url)
title_temp <- html %>%
html_nodes('.list_item') %>%
html_nodes('dt') %>%
html_nodes('a') %>%
html_text()
title_chosun <- c(url_4_chosun_1, title_temp)
title_chosun
for(x in page){
url <- paste0(url_4_chosun_1, x)
html <- read_html(url)
title_temp <- html %>%
html_nodes('.list_item') %>%
html_nodes('dt') %>%
html_nodes('a') %>%
html_text()
title_chosun <- c(title_chosun, title_temp)
}
title_khan<-c()
url_3_khan_1 <- 'http://biz.khan.co.kr/khan_art_list.html?category=economy&page='
page <-c(1:6)
for(x in page){
url <- paste0(url_3_khan_1, x)
html <- read_html(url, encoding = 'euc-kr')
title_temp <- html %>%
html_nodes('.text_area') %>%
html_nodes('.hd_title') %>%
html_nodes('a') %>%
html_text()
title_khan <- c(title_khan, title_temp)
}
url_6_jtbc <- 'http://news.jtbc.joins.com/section/list.aspx?pdate=20190702&scode=20&copyright='
url <- url_6_jtbc
html <- read_html(url)
title6 <- trim(html %>%
html_nodes('.title_cr') %>%
html_text())
trim <- function(x) gsub('^\\s+|\\s+$',"",x)
title6 <- trim(html %>%
html_nodes('.title_cr') %>%
html_text())
title6
title_jtbc <- c()
url_6_jtbc_1 <- 'http://news.jtbc.joins.com/section/list.aspx?pdate='
date <- date <- c(20190702:20190701,20190630:20190626)
url_6_jtbc_2 <- '&scode=20&copyright='
title_khan<-c()
url_3_khan_1 <- 'http://biz.khan.co.kr/khan_art_list.html?category=economy&page='
title_jtbc <- c()
url_5_jtbc_1 <- 'http://news.jtbc.joins.com/section/list.aspx?pdate='
date <- date <- c(20190702:20190701,20190630:20190626)
url_5_jtbc_2 <- '&scode=20&copyright='
for(x in date){
url <- paste0(url_5_jtbc_1, x, url_5_jtbc_2)
html <- read_html(url)
title_temp <- trim(html %>%
html_nodes('.title_cr') %>%
html_text())
title_jtbc <- c(title_jtbc, title_temp)
}
url_7_kbs <- 'http://news.kbs.co.kr/news/list.do?ctcd=0004#20190702&1'
url <- url_7_kbs
html <- read_html(url)
title7 <- html %>%
html_nodes('.desc') %>%
html_nodes('.tit') %>%
html_text()
url_7_kbs <- 'http://news.kbs.co.kr/news/list.do?ctcd=0004#20190701&1'
url <- url_7_kbs
html <- read_html(url)
title7 <- html %>%
html_nodes('.desc') %>%
html_nodes('.tit') %>%
html_text()
url_7_kbs <- 'http://news.kbs.co.kr/news/list.do?ctcd=0004#20190701&2'
url <- url_7_kbs
html <- read_html(url)
title7 <- html %>%
html_nodes('.desc') %>%
html_nodes('.tit') %>%
html_text()
url_8_hankyung <- 'https://www.hankyung.com/all-news/economy?page=2'
url <- url_8_hankyung
html <- read_html(url)
title8 <- html %>%
html_nodes('.tit') %>%
html_text()
title8
url_8_hankyung <- 'https://www.hankyung.com/all-news/economy?page=2'
url <- url_8_hankyung
html <- read_html(url)
title8 <- html %>%
html_nodes('.tit') %>%
html_text()
title8
url_6_hankyung_1 <- 'https://www.hankyung.com/all-news/economy?page='
page <- c(1:65)
title_hankyung <- c()
url_6_hankyung_1 <- 'https://www.hankyung.com/all-news/economy?page='
page <- c(1:65)
for(x in page){
url <- paste0(url_6_hankyung_1, x)
html <- read_html(url)
title_temp <- html %>%
html_nodes('.list_item') %>%
html_nodes('dt') %>%
html_nodes('a') %>%
html_text()
title_hankyung <- c(title_hankyung, title_temp)
}
url_6_hankyung <- 'https://www.hankyung.com/all-news/economy?page=2'
url <- url_6_hankyung
html <- read_html(url)
title8 <- html %>%
html_nodes('.tit') %>%
html_text()
title8
url_6_hankyung <- 'https://www.hankyung.com/all-news/economy?page=20'
url <- url_6_hankyung
html <- read_html(url)
title8 <- html %>%
html_nodes('.tit') %>%
html_text()
title8
title_hankyung <- c()
url_6_hankyung_1 <- 'https://www.hankyung.com/all-news/economy?page='
page <- c(1:65)
url <- paste0(url_6_hankyung_1, 1)
html <- read_html(url)
title_temp <- html %>%
html_nodes('.list_item') %>%
html_nodes('dt') %>%
html_nodes('a') %>%
html_text()
for(x in page){
url <- paste0(url_6_hankyung_1, x)
html <- read_html(url)
title_temp <- html %>%
html_nodes('.tit') %>%
html_text()
title_hankyung <- c(title_hankyung, title_temp)
}
title <- c(title_chosun, title_donga, title_hankyung, title_jtbc, title_khan, title_kmib)
title_Noun <- sapply(title, extractNoun, USE.NAMES = F)
title_unlist <- unlist(title_Noun)
title_replace<- str_replace_all(title_unlist, "[^[:alpha:]]","")
title_filter1<- Filter(function(x) {nchar(x) <= 10}, title_replace)
title_filter2<- Filter(function(x) {nchar(x) >= 2}, title_filter1)
head(sort(table(title_filter2),decreasing = T), 100)
mergeUserDic(data.frame(c('코스닥'), c('n')))
mergeUserDic(data.frame(c('코스피'), c('n')))
title_Noun <- sapply(title, extractNoun, USE.NAMES = F)
title_Noun <- sapply(title, extractNoun, USE.NAMES = F)
title_unlist <- unlist(title_Noun)
title_unlist <- gsub('년월일', '', title_unlist)
title_replace<- str_replace_all(title_unlist, "[^[:alpha:]]","")
title_filter1<- Filter(function(x) {nchar(x) <= 10}, title_replace)
title_filter2<- Filter(function(x) {nchar(x) >= 2}, title_filter1)
head(sort(table(title_filter2),decreasing = T), 100)
title_filter3 <- gsub('년월일', '', title_filter2)
head(sort(table(title_filter3),decreasing = T), 100)
title_replace<- str_replace_all(title_unlist, "[^[:alpha:]]","")
title_filter4<- str_replace_all(title_filter3, "[^[:alpha:]]","")
head(sort(table(title_filter4),decreasing = T), 100)
wordcloudTitleTxt <- as.data.frame(sort(table(title_filter4), decreasing = T))
wordcloud2(wordcloudTitleTxt, color = "random-light", backgroundColor = "grey", rotateRatio = 1)
wordcloudTitleTxt <- head(as.data.frame(sort(table(title_filter4), decreasing = T)),200)
wordcloud2(wordcloudTitleTxt, color = "random-light", backgroundColor = "grey", rotateRatio = 1)
title_Noun <- sapply(title, extractNoun, USE.NAMES = F)
title_Noun <- gsub('년월일', '', title_Noun)
title_unlist <- unlist(title_Noun)
title_replace<- str_replace_all(title_unlist, "[^[:alpha:]]","")
title_filter1<- Filter(function(x) {nchar(x) <= 10}, title_replace)
title_filter2<- Filter(function(x) {nchar(x) >= 2}, title_filter1)
head(sort(table(title_filter2),decreasing = T), 100)
title <- c(title_chosun, title_donga, title_hankyung, title_jtbc, title_khan, title_kmib)
title_Noun <- sapply(title, extractNoun, USE.NAMES = F)
title_unlist <- unlist(title_Noun)
title_replace<- str_replace_all(title_unlist, "[^[:alpha:]]","")
title_filter1<- Filter(function(x) {nchar(x) <= 10}, title_replace)
title_filter2<- Filter(function(x) {nchar(x) >= 2}, title_filter1)
head(sort(table(title_filter2),decreasing = T), 100)
wordcloudTitleTxt <- head(as.data.frame(sort(table(title_filter4), decreasing = T)),200)
wordcloud2(wordcloudTitleTxt, color = "random-light", backgroundColor = "grey", rotateRatio = 1)
wordcloudTitleTxt <- head(as.data.frame(sort(table(title_filter2), decreasing = T)),200)
wordcloud2(wordcloudTitleTxt, color = "random-light", backgroundColor = "grey", rotateRatio = 1)
title <- gsub('년월일', '', title)
title_Noun <- sapply(title, extractNoun, USE.NAMES = F)
title_unlist <- unlist(title_Noun)
title_replace<- str_replace_all(title_unlist, "[^[:alpha:]]","")
title_filter1<- Filter(function(x) {nchar(x) <= 10}, title_replace)
title_filter2<- Filter(function(x) {nchar(x) >= 2}, title_filter1)
head(sort(table(title_filter2),decreasing = T), 100)
title <- gsub('년월일', '', title)
title_Noun <- sapply(title, extractNoun, USE.NAMES = F)
title_unlist <- unlist(title_Noun)
head(title_unlist)
head(title_unlist, 100)
title_unlist <- gsub('년월일', '', title_unlist)
head(title_unlist, 100)
title_replace<- str_replace_all(title_unlist, "[^[:alpha:]]","")
title_filter1<- Filter(function(x) {nchar(x) <= 10}, title_replace)
title_filter2<- Filter(function(x) {nchar(x) >= 2}, title_filter1)
head(sort(table(title_filter2),decreasing = T), 100)
title_replace<- str_replace_all(title_unlist, "[^[:alpha:][년월일일]]","")
title_replace<- str_replace_all(title_unlist, "[^[:alpha:][년월일일]]","")
title_filter1<- Filter(function(x) {nchar(x) <= 10}, title_replace)
title_filter2<- Filter(function(x) {nchar(x) >= 2}, title_filter1)
head(sort(table(title_filter2),decreasing = T), 100)
title_replace<- str_replace_all(title_unlist, "[^[:alpha:]년월일","")
title_replace<- str_replace_all(title_unlist, "[^[:alpha:][년월일]","")
title_filter1<- Filter(function(x) {nchar(x) <= 10}, title_replace)
title_filter2<- Filter(function(x) {nchar(x) >= 2}, title_filter1)
head(sort(table(title_filter2),decreasing = T), 100)
title_replace<- str_replace_all(title_unlist, "[^[:alpha:]([년월일])","")
title_replace<- str_replace_all(title_unlist, "[^[:alpha:](년월일)","")
title_filter1<- Filter(function(x) {nchar(x) <= 10}, title_replace)
title_filter2<- Filter(function(x) {nchar(x) >= 2}, title_filter1)
head(sort(table(title_filter2),decreasing = T), 100)
wordcloudTitleTxt <- head(as.data.frame(sort(table(title_filter2), decreasing = T)))
head(wordcloudTitleTxt)
View(wordcloudTitleTxt)
wordcloudTitleTxt <-as.data.frame(sort(table(title_filter2), decreasing = T))
wordcloudTitleTxt
class(wordcloudTitleTxt)
wordcloudTitleTxt <- wordcloudTitleTxt %>% filter(title_filter2 != '년월일')
wordcloud2(wordcloudTitleTxt, color = "random-light", backgroundColor = "grey", rotateRatio = 1)
title <- c(title_chosun, title_donga, title_hankyung, title_jtbc, title_khan, title_kmib)
title_Noun <- sapply(title, extractNoun, USE.NAMES = F)
title_unlist <- unlist(title_Noun)
title_replace<- str_replace_all(title_unlist, "[^[:alpha:](년월일)","")
title_filter1<- Filter(function(x) {nchar(x) <= 10}, title_replace)
title_filter2<- Filter(function(x) {nchar(x) >= 2}, title_filter1)
wordcloudTitleTxt <-as.data.frame(sort(table(title_filter2), decreasing = T))
# wordcloud2 실행
title <- c(title_chosun, title_donga, title_hankyung, title_jtbc, title_khan, title_kmib)
title_Noun <- sapply(title, extractNoun, USE.NAMES = F)
title_unlist <- unlist(title_Noun)
title_replace<- str_replace_all(title_unlist, "[^[:alpha:]]","")
title_filter1<- Filter(function(x) {nchar(x) <= 10}, title_replace)
title_filter2<- Filter(function(x) {nchar(x) >= 2}, title_filter1)
wordcloudTitleTxt <-as.data.frame(sort(table(title_filter2), decreasing = T))
wordcloudTitleTxt <- wordcloudTitleTxt %>% filter(title_filter2 != '년월일')
wordcloud2(wordcloudTitleTxt, color = "random-light", backgroundColor = "grey", rotateRatio = 1)
url_base <- "https://movie.naver.com/movie/bi/mi/pointWriteFormList.nhn?code=163788&type=after&isActualPointWriteExecute=false&isMileageSubscriptionAlready=false&isMileageSubscriptionReject=false&page=2"
url_base <- "https://movie.naver.com/movie/bi/mi/pointWriteFormList.nhn?code=163788&type=after&isActualPointWriteExecute=false&isMileageSubscriptionAlready=false&isMileageSubscriptionReject=false&page=2"
reviews <- c()
html <- read_html(url_base)
library(stringr)
library(rvest)
library(dplyr)
html <- read_html(url_base)
temp_replace <- html %>%
html_nodes('.score_reple') %>%
html_nodes('p') %>%
html_text()
reviews <- c(reviews, temp_reviews)
temp_replace <- html %>%
html_nodes('.score_reple') %>%
html_nodes('p') %>%
html_text()
reviews <- c(reviews, temp_replace)
reviews_r <- gsub('\\t*\\n*\\r*','',reviews)
reviews_r
reviews <- c(reviews, temp_replace)
reviews_r
url_base <- "https://movie.naver.com/movie/bi/mi/pointWriteFormList.nhn?code=163788&type=after&isActualPointWriteExecute=false&isMileageSubscriptionAlready=false&isMileageSubscriptionReject=false&page=2"
reviews <- c()
url <- paste0(url_base,1)
html <- read_html(url_base)
temp_replace <- html %>%
html_nodes('.score_reple') %>%
html_nodes('p') %>%
html_text()
reviews <- c(reviews, temp_replace)
reviews_r
for(i in 1:10){
url <- paste0(url_base,i)
html <- read_html(url_base)
temp_replace <- html %>%
html_nodes('.score_reple') %>%
html_nodes('p') %>%
html_text()
reviews <- c(reviews, temp_replace)
}
reviews
url_base <- "https://movie.naver.com/movie/bi/mi/pointWriteFormList.nhn?code=163788&type=after&isActualPointWriteExecute=false&isMileageSubscriptionAlready=false&isMileageSubscriptionReject=false&page="
for(i in 1:10){
url <- paste0(url_base,i)
html <- read_html(url_base)
temp_replace <- html %>%
html_nodes('.score_reple') %>%
html_nodes('p') %>%
html_text()
reviews <- c(reviews, temp_replace)
}
reviews
reviews <- c()
for(i in 1:10){
url <- paste0(url_base,i)
html <- read_html(url_base)
temp_replace <- html %>%
html_nodes('.score_reple') %>%
html_nodes('p') %>%
html_text()
reviews <- c(reviews, temp_replace)
}
reviews
reviews <- c()
for(i in 1:10){
url <- paste0(url_base,i)
html <- read_html(url_base)
temp_replace <- html %>%
html_nodes('.score_reple') %>%
html_nodes('p') %>%
html_text()
reviews <- c(reviews, temp_replace)
}
reviews
url_base <- "https://movie.naver.com/movie/bi/mi/pointWriteFormList.nhn?code=163788&type=after&isActualPointWriteExecute=false&isMileageSubscriptionAlready=false&isMileageSubscriptionReject=false&page="
for(i in 1:10){
url <- paste0(url_base,i)
html <- read_html(url_base)
temp_replace <- html %>%
html_nodes('.score_reple') %>%
html_nodes('p') %>%
html_text()
reviews <- c(reviews, temp_replace)
}
reviews
for(i in 1:10){
url <- paste0(url_base,i)
html <- read_html(url_base)
temp_reple <- html %>%
html_nodes('.score_reple') %>%
html_nodes('p') %>%
html_text()
temp_score <- html %>%
html_nodes('.star_score') %>%
html_nodes('em') %>%
html_text()
reviews <- rbind(temp_reple, temp_score)
}
reviews
View(reviews)
reviews <- rbind(temp_reple, temp_score)
reviews
reviews <- cbind(temp_reple, temp_score)
for(i in 1:10){
url <- paste0(url_base,i)
html <- read_html(url_base)
temp_reple <- html %>%
html_nodes('.score_reple') %>%
html_nodes('p') %>%
html_text()
temp_score <- html %>%
html_nodes('.star_score') %>%
html_nodes('em') %>%
html_text()
reviews <- cbind(temp_reple, temp_score)
}
reviews
reviews <- data.frame()
for(i in 1:10){
url <- paste0(url_base,i)
html <- read_html(url_base)
temp_reple <- html %>%
html_nodes('.score_reple') %>%
html_nodes('p') %>%
html_text()
temp_score <- html %>%
html_nodes('.star_score') %>%
html_nodes('em') %>%
html_text()
reviews <- cbind(temp_reple, temp_score)
}
reviews
View(reviews)
temp_score
url_base <- "https://movie.naver.com/movie/bi/mi/pointWriteFormList.nhn?code=163788&type=after&isActualPointWriteExecute=false&isMileageSubscriptionAlready=false&isMileageSubscriptionReject=false&page=1"
html <- read_html(url_base)
colnames(reviews) <- c('reple', 'score')
View(reviews)
reviews <- data.frame()
colnames(reviews) <- c('reple', 'score')
View(reviews)
html <- read_html(url_base)
temp_score <- html %>%
html_nodes('.st_off') %>%
html_nodes('em') %>%
html_text()
reviews
temp_score
temp_score <- html %>%
html_nodes('.star_score') %>%
html_nodes('em') %>%
html_text()
temp_score
temp_reple <- html %>%
html_nodes('.score_reple') %>%
html_nodes('p') %>%
html_text()
temp_reple
url_base <- "https://movie.naver.com/movie/bi/mi/pointWriteFormList.nhn?code=163788&type=after&isActualPointWriteExecute=false&isMileageSubscriptionAlready=false&isMileageSubscriptionReject=false&page=2"
html <- read_html(url_base)
temp_score <- html %>%
html_nodes('.star_score') %>%
html_nodes('em') %>%
html_text()
temp_score
temp_reple <- html %>%
html_nodes('.score_reple') %>%
html_nodes('p') %>%
html_text()
temp_reple
reviews <- rbind(temp_reple, temp_score[3:12])
View(reviews)
reviews <- cbind(temp_reple, temp_score[3:12])
View(reviews)
reviews <- cbind(temp_reple, temp_score[3:12])
reviews <- rbind(temp_reple, temp_score[3:12])
reviews <- cbind(temp_reple, temp_score[3:12])
View(reviews)
reviews <- rbind(temp_reple = temp_reple, temp_score = temp_score[3:12])
reviews <- rbind(temp_reple = temp_reple, temp_score = temp_score[3:12])
reviews <- rbind(temp_reple = temp_reple, temp_score = temp_score[3:12])
View(reviews)
url_base <- "https://movie.naver.com/movie/bi/mi/pointWriteFormList.nhn?code=163788&type=after&isActualPointWriteExecute=false&isMileageSubscriptionAlready=false&isMileageSubscriptionReject=false&page="
r <- c()
s <- c()
url_base <- "https://movie.naver.com/movie/bi/mi/pointWriteFormList.nhn?code=163788&type=after&isActualPointWriteExecute=false&isMileageSubscriptionAlready=false&isMileageSubscriptionReject=false&page="
r <- c()
s <- c()
for(i in 1:10){
url <- paste0(url_base,i)
html <- read_html(url_base)
temp_reple <- html %>%
html_nodes('.score_reple') %>%
html_nodes('p') %>%
html_text()
temp_score <- html %>%
html_nodes('.star_score') %>%
html_nodes('em') %>%
html_text()
r <- c(r, temp_reple)
s <- c(s, temp_score[3:12])
}
reple <- data.frame(text = r, score = s)
View(reple)
num <- html %>%
html_nodes('div.score_total') %>%
html_nodes('em')
num
num <- html %>%
html_nodes('div.score_total') %>%
html_nodes('em') %>%
html_text()
num
num_ <- as.numeric(num[2])
num_
num_ <- num[2]
class(num_)
for(i in 1:100){
url <- paste0(url_base,i)
html <- read_html(url_base)
temp_reple <- html %>%
html_nodes('.score_reple') %>%
html_nodes('p') %>%
html_text()
temp_score <- html %>%
html_nodes('.star_score') %>%
html_nodes('em') %>%
html_text()
r <- c(r, temp_reple)
s <- c(s, temp_score[3:12])
}
reple <- data.frame(text = r, score = s)
head(reple)
View(reple)
